{
  "updatedAt": "2025-11-10T17:55:30.000Z",
  "createdAt": "2025-11-06T18:57:58.199Z",
  "id": "zNTOk1jfr00CG8uY",
  "name": "CHATBOT",
  "active": false,
  "isArchived": false,
  "nodes": [
    {
      "parameters": {
        "public": true,
        "mode": "webhook",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.3,
      "position": [
        0,
        0
      ],
      "id": "bdab9e7d-9889-4eb5-bba1-ae20ce8bcf19",
      "name": "When chat message received",
      "webhookId": "9e89ede1-a904-47a2-90cd-efded0b63be9"
    },
    {
      "parameters": {
        "options": {
          "systemMessage": "Eres un asistente especializado en responder preguntas usando información recuperada desde una base de vectores (Pinecone). \nTu objetivo es responder únicamente basándote en el CONTEXTO que se te entregue en cada mensaje.\n\nREGLAS:\n1. NO inventes información. Si la respuesta no está en el contexto, dilo.\n2. Si el usuario pregunta algo fuera del contexto, responde: \n   \"No tengo esa información disponible en este momento.\"\n3. Responde de forma clara, organizada y amable.\n4. Si el contexto contiene varios fragmentos, sintetiza la información antes de responder.\n5. Nunca menciones que estás usando Pinecone o embeddings, solo responde como un humano experto.\n\nFORMATO DE RESPUESTA:\n- Si hay información relevante → responde directo y claro.\n- Si no hay información suficiente → dilo sin inventar.\n\nEjemplo de respuesta cuando sí sabes:\n\"El envío nacional demora entre 48 y 72 horas.\"\n\nEjemplo de respuesta cuando no está en el contexto:\n\"No tengo datos sobre eso en la información proporcionada.\"\n\nEstás listo. Espera el mensaje del usuario y el contexto recuperado.\n"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3,
      "position": [
        208,
        0
      ],
      "id": "19afd1ab-500d-4e44-9e9d-6e664eb47183",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4o-mini-2024-07-18",
          "mode": "list",
          "cachedResultName": "gpt-4o-mini-2024-07-18"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        80,
        208
      ],
      "id": "63f3224a-79c5-43fb-8299-3cc31dac3e53",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "2Xw6oQQVZ6F8QQma",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        224,
        208
      ],
      "id": "f135b207-715d-4395-b1d6-b2eb86970296",
      "name": "Simple Memory"
    },
    {
      "parameters": {
        "mode": "retrieve-as-tool",
        "toolDescription": "Trabaja con tu pinecone vector store donde tienes toda la información sobre las preguntas.",
        "pineconeIndex": {
          "__rl": true,
          "value": "ragudia",
          "mode": "list",
          "cachedResultName": "ragudia"
        },
        "options": {
          "pineconeNamespace": "udia_rag"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStorePinecone",
      "typeVersion": 1.3,
      "position": [
        416,
        240
      ],
      "id": "4dfd4364-8316-439b-a027-628f418c0d77",
      "name": "Pinecone Vector Store",
      "credentials": {
        "pineconeApi": {
          "id": "T9h9yfrEPQ6ZlCjJ",
          "name": "PineconeApi account"
        }
      }
    },
    {
      "parameters": {
        "options": {
          "dimensions": 512
        }
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        368,
        400
      ],
      "id": "e5c1871d-ae6c-4431-919c-72ff3be200ee",
      "name": "Embeddings OpenAI",
      "credentials": {
        "openAiApi": {
          "id": "2Xw6oQQVZ6F8QQma",
          "name": "OpenAi account"
        }
      }
    }
  ],
  "connections": {
    "When chat message received": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Pinecone Vector Store": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI": {
      "ai_embedding": [
        [
          {
            "node": "Pinecone Vector Store",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "pinData": {},
  "versionId": "a7f2c3e5-ed62-48e7-b14b-de79584a73ed",
  "triggerCount": 1,
  "shared": [
    {
      "updatedAt": "2025-11-06T18:57:58.203Z",
      "createdAt": "2025-11-06T18:57:58.203Z",
      "role": "workflow:owner",
      "workflowId": "zNTOk1jfr00CG8uY",
      "projectId": "kbsnYJQSz9jlxwjy"
    }
  ],
  "tags": []
}